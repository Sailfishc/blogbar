{% extends "layout.html" %}
{% from "macro/form.html" import horizontal_field %}
{% from "macro/ui.html" import pagination %}

{% block page_title %}{{ blog.title }}{% endblock %}
{% block page_content %}
   <div class="container">
      <div class="col-sm-8">
         <h1>
            {{ blog.title }}
         </h1>

         <p>{{ posts_count }}篇博客</p>

         <p>链接：<a href="{{ blog.url }}" target="_blank">{{ blog.url }}</a></p>

         {% if blog.feed %}
            {% set feed = blog.feed %}
         {% else %}
            {% set feed = url_for('blog.feed', uid=blog.id) %}
         {% endif %}

         <p>
            <a href="{{ feed }}" target="_blank">
               <span class="fa fa-rss"></span>
            </a>
         </p>

         <p>作者：{{ blog.author }}</p>

         <hr/>

         {% for p in posts.items %}
            <div>
               <a href="{{ url_for('blog.post', uid=p.id) }}">{{ p.title }}</a>

               &nbsp;&nbsp;

               <a href="{{ p.url }}" target="_blank">
                  <span class="fa fa-external-link"></span>
               </a>

               <div class="time">
                  {% if p.published_at %}
                     <span>发布于：{{ p.published_at }}</span>
                  {% endif %}

                  {% if p.updated_at %}
                     <span>更新于：{{ p.updated_at }}</span>
                  {% endif %}
               </div>
            </div>
         {% endfor %}

         {{ pagination(posts) }}
      </div>
   </div>
{% endblock %}