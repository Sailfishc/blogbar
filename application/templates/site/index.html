{% extends "layout.html" %}
{% from 'macro/ui.html' import pagination %}

{% block page_title %}首页{% endblock %}
{% block page_content %}
   <div class="container">
      <div class="col-sm-8">
         <h2>编辑推荐</h2>

         {% for post in recommend_posts.items %}
            <div style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #ddd;">
               <div class="title" style="font-size: 20px;padding: 5px 0">
                  <a href="{{ url_for('blog.redirect_post', uid=post.id) }}"
                     target="_blank">
                     {{ post.title }}
                  </a>
               </div>

               <p class="abstract">{{ post.content|puretext|truncate(100, true) }}</p>

               <div class="text-light">
                  <a style="color: #666; font-weight: bold;"
                     href="{{ url_for('blog.view', uid=post.blog.id) }}">
                     {{ post.blog.title }}
                  </a>
                  &nbsp;/&nbsp;
                  {{ post.blog.author }}
                  &nbsp;&nbsp;&nbsp;&nbsp;
                  {% if post.published_at or post.updated_at %}
                     {{ post.published_at|timesince or post.updated_at|timesince }}
                  {% endif %}
                  &nbsp;&nbsp;&nbsp;&nbsp;
                  {{ post.clicks if post.clicks else 0 }} 次点击
               </div>
            </div>
         {% endfor %}

         {{ pagination(recommend_posts) }}
      </div>

      <div class="col-sm-4">
         <hr/>
         <p>{{ blogs_count }} 博客，{{ posts_count }} 博文</p>
         <hr/>

         <h2>
            最新博文
            <a href="{{ url_for('blog.posts') }}" class="btn btn-primary btn-xs">
               全部博文 <span class="fa fa-angle-right"></span>
            </a>
         </h2>

         {% for post in latest_posts %}
            <div>
               {#               <a href="{{ url_for('blog.post', uid=post.id) }}">#}
               {#                  {{ post.title }}#}
               {#               </a>#}
               <a href="{{ url_for('blog.redirect_post', uid=post.id) }}" target="_blank">
                  {{ post.title }}
               </a>

               {{ post.blog.author }}

               <a href="{{ post.url }}" target="_blank">
                  <span class="fa fa-external-link"></span>
               </a>
            </div>
         {% endfor %}

         <h2>
            最新收录博客
            <a href="{{ url_for('blog.all_blogs') }}" class="btn btn-primary btn-xs">
               全部博客 <span class="fa fa-angle-right"></span>
            </a>
         </h2>

         {% for blog in latest_blogs %}
            <div>
               <a href="{{ url_for('blog.view', uid=blog.id) }}">{{ blog.title }}</a>
            </div>
         {% endfor %}
      </div>
   </div>
{% endblock %}